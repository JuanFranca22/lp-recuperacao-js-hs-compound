<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de Juros Compostos</title>
</head>
<body>
    <h1>Juros Compostos</h1>

    <label>Principal (R$):</label>
    <input id="principal" type="number" step="0.01" /><br><br>

    <label>Taxa anual (ex: 0.12):</label>
    <input id="rate" type="number" step="0.0001" /><br><br>

    <label>Vezes por ano:</label>
    <input id="timesPerYear" type="number" /><br><br>

    <label>Anos:</label>
    <input id="years" type="number" step="0.1" /><br><br>

    <button onclick="calculate()">Calcular</button>

    <h2 id="result"></h2>

    <script>
        const API = "https://SEU_BACKEND.onrender.com";

        async function calculate() {
            const body = {
                principal: parseFloat(document.getElementById('principal').value),
                rate: parseFloat(document.getElementById('rate').value),
                timesPerYear: parseInt(document.getElementById('timesPerYear').value),
                years: parseFloat(document.getElementById('years').value)
            };

            try {
                const res = await fetch(`${API}/api/compound`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(body)
                });

                const data = await res.json();

                if (res.status !== 200) {
                    document.getElementById('result').innerText = "Erro: " + (data.error || JSON.stringify(data));
                    return;
                }

                document.getElementById('result').innerText =
                    "Montante: " + data.amount.toLocaleString('pt-BR', {
                        style: 'currency', currency: 'BRL'
                    });
            } catch (e) {
                document.getElementById('result').innerText = "Erro de rede: " + e.message;
            }
        }
    </script>
</body>
</html>
